# GProtobuf Codebase Structure

## Solution Structure
- **GProtobuf.sln** - Main solution file containing all projects

## Core Projects

### GProtobuf.Generator (netstandard2.0)
- Source generator project that creates serialization code
- Key files:
  - `SerializerGenerator.cs` - Main incremental generator implementation
  - `ObjectTree.cs` - Builds type hierarchy and generates deserialization methods
  - `StringBuilderWithIndent.cs` - Code generation utility
  - `ProtoInclude.cs` - Attribute definitions for inheritance support
  - `IsExternalInit.cs` - Compatibility shim

### GProtobuf.Core (net8.0)
- Core serialization/deserialization primitives
- Key files:
  - `SpanReader.cs` - High-performance span-based reader for Protocol Buffer wire format
  - `SpanReader.Collections.cs` - Collection handling extensions
  - `BufferWriter.cs` - Writing implementation
  - `StreamWriter.cs` - Stream-based writing
  - `WriteSizeCalculator.cs` - Size calculation utilities
  - `WireType.cs` - Protocol Buffer wire type definitions
  - `ClassCollectionCollector.cs` - Collection handling for managed types
  - `UnmanagedCollectionCollector.cs` - Collection handling for unmanaged types
  - `Utils.cs` - Utility functions

### GProtobuf.Definitions (project for shared definitions)
- Contains shared attribute definitions
- `ProtoInclude.cs` - ProtoInclude attribute for inheritance

### GProtobuf.CrossTests (net8.0)
- Test project for verifying generator and serialization
- Uses xUnit, FluentAssertions, protobuf-net for compatibility testing
- Test models in `TestModel/` directory covering various scenarios:
  - Basic types, arrays, collections
  - Nullable types, ZigZag encoding
  - Dictionaries, GUIDs
  - Nested messages and inheritance (ABC hierarchy)

### GProtobuf.Benchmark (net8.0)
- Performance benchmarking project
- Benchmarks for:
  - Collections (`CollectionsBenchmark.cs`)
  - Nested messages (`NestedMessagesBenchmark.cs`)
  - Primitive types (`PrimitiveTypesBenchmark.cs`)
- Models in `Models/` directory

### Demo/Test Projects
- **Todos** - Simple demo project
- **proto-playground** - Experimental playground

## Generated Files
- Located in `GeneratedFiles/` directory
- Contains generated serialization code like `*.Serialization.cs`
- Generated by the source generator at build time

## Important Directories
- `bin/` and `obj/` - Build output directories (in each project)
- `.serena/` - Serena MCP configuration